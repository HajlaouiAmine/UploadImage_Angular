<div class="container mt-5">
    <h3 class="text-center mb-4">Image Upload</h3>
    <form [formGroup]="imageForm" (ngSubmit)="upload()" class="needs-validation" novalidate>
      <div class="mb-3">
        <label for="name" class="form-label">Name:</label>
        <input id="name" formControlName="name" type="text" class="form-control" [class.is-invalid]="imageForm.get('name')?.invalid && imageForm.get('name')?.touched" required>
        <div *ngIf="imageForm.get('name')?.invalid && imageForm.get('name')?.touched" class="invalid-feedback">
          Name is required
        </div>
      </div>
      <div class="mb-3">
        <label for="user" class="form-label">User:</label>
        <input id="user" formControlName="user" type="text" class="form-control" [class.is-invalid]="imageForm.get('user')?.invalid && imageForm.get('user')?.touched" required>
        <div *ngIf="imageForm.get('user')?.invalid && imageForm.get('user')?.touched" class="invalid-feedback">
          User is required
        </div>
      </div>
      <div class="mb-3">
        <label for="path" class="form-label">Path:</label>
        <input id="path" formControlName="path" type="text" class="form-control" [class.is-invalid]="imageForm.get('path')?.invalid && imageForm.get('path')?.touched" required>
        <div *ngIf="imageForm.get('path')?.invalid && imageForm.get('path')?.touched" class="invalid-feedback">
          Path is required
        </div>
      </div>
      <div class="mb-3">
        <label for="file" class="form-label">Image:</label>
        <input id="file" type="file" (change)="selectFile($event)" class="form-control" [class.is-invalid]="imageForm.get('image')?.invalid && imageForm.get('image')?.touched" required>
        <div *ngIf="imageForm.get('image')?.invalid && imageForm.get('image')?.touched" class="invalid-feedback">
          Image is required
        </div>
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="!imageForm.valid">Upload</button>
    </form>
  
    <div *ngIf="message" class="alert alert-warning mt-3">
      {{ message }}
    </div>
  
    <div *ngIf="imageUrl" class="mt-3">
      <h4>Image URL:</h4>
      <a [href]="imageUrl" target="_blank">{{ imageUrl }}</a>
      <div>
        <img [src]="imageUrl" alt="Uploaded Image" class="img-fluid mt-2">
      </div>
    </div>
  </div>
  